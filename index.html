<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>胖波功能測試場</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #222; font-family: sans-serif; overflow: hidden; }

    #ui-panel {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }

    .test-btn {
      display: inline-block;
      margin: 4px;
      padding: 6px 12px;
      background: #444;
      border: 1px solid #888;
      color: white;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
    }

    #message-box {
  position: absolute;
  top: 0;
  right: 0;
  width: 260px;
  height: 100vh;
  padding: 10px;
  box-sizing: border-box;
  overflow-y: auto;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  font-size: 14px;
  font-family: monospace;
  z-index: 20;
  cursor: move; /* 加上拖曳感 */
}


    .message-line {
      margin-bottom: 8px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 4px;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>

  <!-- 測試按鈕列 -->
  <div id="ui-panel">
    <button class="test-btn" onclick="runTest('move')">🕹 測試胖波移動</button>
    <button class="test-btn" onclick="runTest('map')">🗺 載入地圖</button>
    <button class="test-btn" onclick="runTest('enemy')">👾 生成敵人</button>
    <button class="test-btn" onclick="runTest('dialog')">💬 顯示訊息框</button>
  </div>

  <!-- 右側訊息框 -->
  <div id="message-box"></div>
  <!-- 原本訊息框 -->
  <div id="message-box" draggable="true"></div>

  <!-- Phaser 核心與腳本 -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>

  <script>
    // 🧠 UI 顯示訊息框
    const messageBox = document.getElementById('message-box');
    function showMessage(text) {
      const line = document.createElement('div');
      line.className = 'message-line';
      line.innerText = '🟢 ' + text;
      messageBox.appendChild(line);
      messageBox.scrollTop = messageBox.scrollHeight;
    }

    // 🎮 Phaser 主遊戲設定
    const config = {
      type: Phaser.AUTO,
      width: window.innerWidth - 260, // 扣掉訊息欄
      height: window.innerHeight,
      backgroundColor: '#1d1d1d',
      scene: {
        preload,
        create,
        update
      }
    };

    const game = new Phaser.Game(config);
    let pokota;
    let scene;

    function preload() {
      this.load.image('pokota', 'https://dummyimage.com/32x32/ff69b4/000000&text=P');
    }

    function create() {
      scene = this;
      window.scene = this;

      pokota = this.add.sprite(200, 200, 'pokota');
      window.pokota = pokota;

      showMessage('🎮 遊戲啟動，胖波出場啦！');
    }

    function update() {}

    // ⚙️ 測試功能入口
    function runTest(feature) {
      switch (feature) {
        case 'move':
          showMessage('胖波開始亂跑！');
          if (scene && pokota) {
            let dx = Phaser.Math.Between(-1, 1);
            let dy = Phaser.Math.Between(-1, 1);
            pokota.x += dx * 32;
            pokota.y += dy * 32;
          }
          break;
        case 'map':
          showMessage('📡 地圖載入中...（尚未實作）');
          break;
        case 'enemy':
          showMessage('👾 敵人生成完成！（尚未實作）');
          break;
        case 'dialog':
          showMessage('💬 這是一個測試訊息框唷～');
          break;
      }
    }
  </script>

</body>
</html>
